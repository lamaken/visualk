<!DOCTYPE HTML>
<html lang="en-US">
    <head>
        <meta charset="UTF-8">
        <title>tubsJs</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <script type="text/javascript" src = "njs/gameOne.js"></script>
        <script type="text/javascript" src = "njs/simpleGame.js"></script>
        <script type="text/javascript" src="njs/debug.js"></script>
        <script type="text/javascript" src="njs/ball.js"></script>

        <script type="text/javascript" src="njs/tubsworld.js"></script>


        <script type="text/javascript" src="njs/circuitdyn.js"></script>
        <script type="text/javascript" src="njs/animation.js"></script>
        <script type="text/javascript" src="njs/index.js"></script>
        <script type="text/javascript" src="njs/Manifest.js"></script>

        <script type="text/javascript" src="njs/draw.js"></script>
        <link rel="stylesheet" type="text/css" href="css/hello.css">


        <script>
            (function (i, s, o, g, r, a, m) {
                i['GoogleAnalyticsObject'] = r;
                i[r] = i[r] || function () {
                    (i[r].q = i[r].q || []).push(arguments)
                }, i[r].l = 1 * new Date();
                a = s.createElement(o),
                        m = s.getElementsByTagName(o)[0];
                a.async = 1;
                a.src = g;
                m.parentNode.insertBefore(a, m)
            })(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga');

            ga('create', 'UA-80760197-3', 'auto');
            ga('send', 'pageview');

        </script>

        <script type="text/javascript">
            var timer;
            var output;
            var game;
            var stop = false;
            var dead_img;
            dead_img = new Image();
            dead_img.src = 'img/dead.png';

            var home_img;
            home_img = new Image();
            home_img.src = 'img/home.png';




            function nstart(filename) {

                load(filename);
                reloadAnime();
                updateImages();
            }

            function is_touch_device() {
                return (('ontouchstart' in window)
                        || (navigator.MaxTouchPoints > 0)
                        || (navigator.msMaxTouchPoints > 0));
            }

            function resizecanvas() {
                var el = document.getElementById("myCanvas");
                if (!is_touch_device()) {
                    el.addEventListener("click", swapp, false);
                } else
                    el.addEventListener("touchstart", swapp, false);



                var w = window.innerWidth - 30;
                var h = window.innerHeight - 150;//50px son de una linea de glifos
                el.width = w;
                el.height = h;


            }

            function inicialitza() {

                setCookie("1b", "primer de proba");
                updateImages();



                var el = document.getElementById("myCanvas");
                if (!is_touch_device()) {
                    el.addEventListener("click", swapp, false);
                } else
                    el.addEventListener("touchstart", swapp, false);


                resizecanvas();
                stop = false;
                game = new Scene();
                output = document.getElementById("output");
                timer = new Timer();
                timer.reset();
                game.start();

            }


            function update() {
                game.hide();
                currentTime = timer.getElapsedTime();
                // output.innerHTML = currentTime;
                //debug.output("time:" + currentTime);
                if (!stop)
                    animate2();

            } // end update

            function reset() {
                timer.reset();
                stop = !stop;
            } // end reset


            function updateImages() {



                var c = document.getElementById("circuits");
                c.innerHTML = "";

                if (getCookie("1b"))
                    c.innerHTML += "<img onclick=\"nstart('circuit1b.xml');\" width='50' height='50'  src='img/glifos/glifo1.png' alt=''/>";
                if (getCookie("2"))
                    c.innerHTML += "<img onclick=\"nstart('circuit2.xml');\" width='50' height='50'  src='img/glifos/glifo2.png' alt=''/>";
                if (getCookie("3"))
                    c.innerHTML += "<img onclick=\"nstart('circuit3.xml');\" width='50' height='50'  src='img/glifos/glifo3.png' alt=''/>";
                if (getCookie("4b"))
                    c.innerHTML += "<img onclick=\"nstart('circuit4b.xml');\" width='50' height='50'  src='img/glifos/glifo4.png' alt=''/>";
                if (getCookie("5"))
                    c.innerHTML += "<img onclick=\"nstart('circuit5.xml');\" width='50' height='50'  src='img/glifos/glifo5.png' alt=''/>";
                if (getCookie("6"))
                    c.innerHTML += "<img onclick=\"nstart('circuit6.xml');\" width='50' height='50'  src='img/glifos/glifo6.png' alt=''/>";
                if (getCookie("7"))
                    c.innerHTML += "<img onclick=\"nstart('circuit7.xml');\" width='50' height='50'  src='img/glifos/glifo7.png' alt=''/>";
                if (getCookie("8"))
                    c.innerHTML += "<img onclick=\"nstart('circuit8.xml');\" width='50' height='50'  src='img/glifos/glifo8.png' alt=''/>";
                if (getCookie("9"))
                    c.innerHTML += "<img onclick=\"nstart('circuit9.xml');\" width='50' height='50'  src='img/glifos/glifo9.png' alt=''/>";
                if (getCookie("10"))
                    c.innerHTML += "<img onclick=\"nstart('circuit10.xml');\" width='50' height='50'  src='img/glifos/glifo10b.png' alt=''/>";
                if (getCookie("11"))
                    c.innerHTML += "<img onclick=\"nstart('circuit11.xml');\" width='50' height='50'  src='img/glifos/glifo11.png' alt=''/>";
                if (getCookie("12"))
                    c.innerHTML += "<img onclick=\"nstart('circuit12.xml');\" width='50' height='50'  src='img/glifos/glifo12.png' alt=''/>";





            }
        </script>
    </head>
    <body onresize="resizecanvas();" onload = "inicialitza();
            start();">

        <div id="img">
            <center>
                <a href="https://play.google.com/store/apps/details?id=visualk.games.tubsworld"><x1>tubsworld</x1> <version>v0.2</version></a>
                </center>
            
            <canvas id="myCanvas"> 
                <!-- TODO:Pensar en fer amb els tamanys -->
                No canvas found. Click to view in other canvas.
            </canvas>
        </div>





        <div id="debug" style="visibility: hidden">
            error
        </div>
        <script>
            var debug = new Debug("player");
            var animation_debug = new Debug("aniamte.js");
            debug.output("get clone and go!");
            debug.output("git@github.com:lamaken/etubsworld.git");
        </script>
        <div id="output"> </div>

        <div id="circuits">


        </div>    

    </body>
</html>